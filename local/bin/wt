#!/usr/bin/env sh

while getopts l:b opt; do
    case "$opt" in
        l) lang="$OPTARG" ;;
        b) browse=1 ;;
    esac
done
shift $((OPTIND - 1))

if [ -n "$browse" ]; then
    browser \!wt "$(echoorcat "$@")"
else
    URL=https://en.wiktionary.org/api/rest_v1/page/definition
    curl -s "$URL/$(echoorcat "$@")" \
        | sed 's/<[^>]*>//g' \
        | jq ".$lang"
fi
