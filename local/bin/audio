#!/usr/bin/env sh
# Volume interface for sxhkd.

case $1 in
	vol)
		if amixer get Master | grep -q '\[on\]'; then
			amixer sset Master $2
			msg="$( amixer get Master | grep -o '[0-9]*%' )"
		else
			amixer scontrols | cut -d \' -f 2 | xargs -I % amixer sset % unmute
			msg='Muted'
		fi
		dunstify -u low -r 54321 -t 1000 "$msg" ;;

	toggle)
		[ -n "$( amixer sget Front | grep '\[0%\]' )" ] \
			&& { FRONT=100; HOOK=1; } \
			|| { FRONT=0;   HOOK=2; }
		amixer sset Front $FRONT
		amixer sset Headphone $(( 100 - FRONT ))
		polybar-msg hook volicon $HOOK ;;
esac


