#!/usr/bin/env sh

[ -z "$1" ] && exit 1

# Check URL
echo "$1" | grep -E '^(https?://)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]+\.[a-zA-Z0-9]+.*$' && exit

dir=~/.local/share/urlparse

# Check searchengines/bookmarks
[ -n "${se:=$( awk "/^$1 / {print \$2}" $dir/searchengines )}" ] && { shift; printf "$se" "$*"; exit; }
[ -n "${bm:=$( awk "/^$1 / {print \$2}" $dir/bookmarks )}" ] && { echo "$bm"; exit; }

# Default to 1st search engine
printf "$( awk 'NR==1 {print $2}' $dir/searchengines )" "$*"
