#!/usr/bin/env sh

choices="$(cat << EOF
area
window
screen
area (copy)
window (copy)
screen (copy)
EOF
)"

choice="$(echo "$choices" | rofi -dmenu -l $(echo "$choices" | wc -l) -p 'scrotpick')" || exit 1

case "$choice" in
    a*) cmd='-s' ;;
    w*) cmd='-u' ;;
    s*) cmd='' ;;
esac

# get rofi outta the way
sleep .2

case "$choice" in
    *copy*)
        scrot $cmd -e 'xclip -sel c -t image/png -i $f' \
            && notify-send 'scrotpick' 'Copied screenshot' ;;
    *)
        filename="$HOME/pics/scrotpick-$(date '+%y%m%d-%H%M-%S').png"
        scrot $cmd "$filename" \
            && notify-send 'scrotpick' "$filename" ;;
esac
