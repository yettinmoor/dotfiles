#!/usr/bin/env sh

if [ -n "$1" ]; then
    cd "$1" || exit 1
    shift
fi

exts='(jpg|png|gif|mkv|mp4|m4v|avi|webm|pdf|djvu|epub|txt|md|sent|svg|html|cbr|cbz)$'

fd --strip-cwd-prefix -t f $exts "$@" \
    | dmenu -i -p "Read file in $(pwd)" -theme-str 'window {width: 80%;}' \
    | xargs -r -I {} xdg-open "{}" &
