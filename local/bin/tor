#!/usr/bin/env sh
# Start/open transmission-daemon and tremc; add torrents from args
# Default mime app for .torrent & magnet links

if ! pgrep -x transmission-da >/dev/null; then
    notify-send "Starting torrent daemon..."
    transmission-daemon
    while ! pgrep -x transmission-da >/dev/null; do true; done
    sleep 1
fi

[ -n "$1" ] && transmission-remote -a "$@" && notify-send "ï€™ $# torrent(s) added."
xwininfo -tree -root | grep '"tremc"' >/dev/null || $TERMINAL -e tremc
