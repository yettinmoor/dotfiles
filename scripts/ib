#!/usr/bin/env sh

case "$1" in
	onoff)
		if pgrep ibus 2>/dev/null; then ib off; else ib on; fi ;;
	on)
		ibus-daemon -drx
		sleep 1
		dwmbar ibus ;;
	off)
		ibus exit
		dwmbar ibus ;;
	toggle)
		pgrep ibus 2>/dev/null || exit 1
		if [ "$( ibus engine )" = "anthy" ]; then
			ibus engine xkb:se::swe
		else
			ibus engine anthy
		fi
		dunstify -r 9191 -u critical "$( ib show )"
		dwmbar ibus ;;
	show)
		ibus engine 2>/dev/null | sed 's/anthy/æ–‡/; s/xkb.*/Aa/'
esac
