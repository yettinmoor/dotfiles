#!/bin/sh
# SLOC counter for code. Doesn't count comments & empty lines. Default comment tag is "#".

count() {
	case "$1" in
		*.c|*.h)	com="\/[\/\*]" ;;
		*.tex)		com="%" ;;
		*)			com="#" ;;
	esac
	sed -E "/^\s*$com/d;/^\s*$/d" $1 | wc -l
}

tot=0
out=

for f in $@; do
	[ -f $f ] || continue
	n=$( count $f )
	out="${out}$f $n lines\n"
	tot=$(( tot + n ))
done

[ $# -gt 1 ] && out="${out}TOTAL $tot lines"
echo "$out" | column -t -R 2
