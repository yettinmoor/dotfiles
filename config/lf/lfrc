# vim: filetype=conf

# settings
set shell sh
set shellopts '-eu'
set ifs "\n"
set scrolloff 10
set icons
set drawbox
set ratios 1:2:3
set period 1
set previewer '~/.local/bin/preview'
set cleaner '~/.local/bin/preview-clean'

# unmaps
map m
map ,

# opening
cmd open $launch -de "$fx" # map o
map L &launch "$fx"
map w $echo entering shell session && $SHELL
map <enter> shell
map gui &launch -dx thunar "$fx"

# mk
cmd mkdir %mkdir "$@"
cmd mkfile %touch "$@"
map mkd push :mkdir<space>
map mkf push :mkfile<space>

# cd
map <c-f> $lf -remote "send $id cd '$(fd -t d --strip-cwd-prefix | fzf)'"
map J     $lf -remote "send $id cd '$(dirpick)'"

# files
map U            clear
map D            delete
map <c-y>        $echo "$fx" | xclip -sel c -i
map <backspace2> set hidden!

map ,yy $echo "$fx" | xclip -sel c -i
map ,yc $clipimg "$f"

# renaming
map a rename # at the very end
map r push a<c-u> # new rename
map R push a<a-b><a-b><a-f><c-u> # keep ext
map i push a<c-a> # at the very beginning
map B $vidir

# media
map x &{{
    launch -dx sxiv -abto . \
        | while read -r img; do
            lf -remote "send $id toggle $img"
            lf -remote "send $id select $img"
        done
}}
map X &{{
    launch -dx sxiv -abtor . \
        | while read -r img; do
            lf -remote "send $id toggle $img"
            lf -remote "send $id select $img"
        done
}}
map P &launch -dx mpv .
map ww $watched $f

# lfshortcuts
source ~/.config/lf/lfshortcuts
