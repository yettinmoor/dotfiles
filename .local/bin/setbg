#!/bin/sh
# Sets the background. If given an argument, will set file as background.

while getopts "rRc" opt; do
	shift
	case $opt in
		r) w=$( find ~/pics/wallpapers | grep -e jpg -e png | shuf -n 1 ) ;;
		c) w=$( find -L ~/pics/wallpapers | grep -e jpg -e png | shuf -n 50 | sxiv -ftio 2>/dev/null | sed 1q ) ;;
		*) echo "Usage: setbg [-rRc] [file]" && exit 1
	esac
done

if [ -n "${w:=$1}" ]; then
	cp -u "$w" ~/pics/wallpapers 2>/dev/null
	cp "$w" ~/.config/wall.png
	notify-send "Wallpaper changed."
fi

xwallpaper --zoom ~/.config/wall.png
